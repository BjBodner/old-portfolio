function [Y,Xf,Af] = New_NN_for_BN_10Neurons(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 12-Jan-2018 21:58:57.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 135xQ matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 10xQ matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.690196078431373;0.235294117647059;0.0130266639527783;0.028619580704254;0.017338489721148;0.0105911602626441;0.0130266639527783;0.0117669373016411;0.00587020075235015;0.0117669373016411;0.022510075310401;0.00709524994157602;0.145098039215686;0.733775094043769;0.802831671076735;0.686274509803922;0.258823529411765;0.207843137254902;0.028619580704254;0.018962962962963;0.00709524994157602;0.00549562385507836;0.0206858598879767;0.0130266639527783;0.0254427030327702;0.0264740409043279;0.192156862745098;0.290196078431373;0.733775094043769;0.677834256809221;0.258823529411765;0.017338489721148;0.00897856782082306;0.00258573248599709;0.0111687360065133;0.018962962962963;0.00753857867637636;0.022510075310401;0.0206858598879767;0.0234610820875832;0.00847987576422341;0.015079991858335;0.0244385040444475;0.290196078431373;0.772728679014858;0.196078431372549;0.00753857867637636;0.00415653104763628;0.00446814573580297;0.00847987576422341;0.00587020075235015;0.00197619316854;0.00330925511304099;0.015079991858335;0.0130266639527783;0.00258573248599709;0.00162833299409729;0.00549562385507836;0.176470588235294;0.724245667201906;0.192156862745098;0.00709524994157602;0.00258573248599709;0.0136889130123407;0.01580954534832;0.008;0.000351719926725015;0.00626142283133938;0.00587020075235015;0.00709524994157602;0.015079991858335;0.00281375941380012;0.00385975228230469;0.156862745098039;0.792712063987456;0.137254901960784;0.00258573248599709;0.00237037037037037;0.00132389503283051;0.0206858598879767;0.00237037037037037;0.00385975228230469;0.00587020075235015;0.00626142283133938;0.00587020075235015;0.0136889130123407;0.00330925511304099;0.00357744758803175;0.152941176470588;0.802831671076735;0.172549019607843;0.00513733028774755;0.00281375941380012;0.0130266639527783;0.0181386043075439;0.0100338482182569;0.00549562385507836;0.00446814573580297;0.0100338482182569;0.00357744758803175;0.0111687360065133;0.00197619316854;0.000642166285968443;0.0862745098039216;0.743387746794219;0.215686274509804;0.0100338482182569;0.00330925511304099;0.00897856782082306;0.028619580704254;0.0130266639527783;0.00587020075235015;0.0111687360065133;0.00357744758803175;0.0111687360065133;0.00587020075235015;0.01580954534832;0.00197619316854;0.125490196078431;0.792712063987456;0.250980392156863;0.01580954534832;0.0105911602626441;0.0100338482182569;0.017338489721148;0.0105911602626441;0.00897856782082306;0.0117669373016411;0.00587020075235015;0.0100338482182569;0.0254427030327702;0.00709524994157602;0.00305481300555593;0.145098039215686;0.823328523720138];
x1_step1.gain = [4.95273186044746;2.32559090319282;1.85366939988261;1.88294146727264;1.85532773709257;1.8682016148276;1.84797990991704;1.84480426889574;1.84183399708816;1.85642445460532;1.87040299704176;1.83046995872066;2.10436680732295;5.5732072987765;6.84214786038716;4.88400025936023;2.38615423773311;2.26578127765156;1.86915635314957;1.88037961821719;1.84451918730575;1.83703122557556;1.86292816176039;1.85165843695827;1.87242908286887;1.8709018688906;2.21289089506704;2.47873584457041;5.53086162502396;4.86317215727571;2.39287693791496;1.86844906930146;1.84740923190497;1.8329721009001;1.841261730815;1.88543891748918;1.85323083597181;1.87754311024362;1.86709713861798;1.88678760501827;1.86473048852855;1.85360687854274;1.86405617792028;2.48357355996632;6.13111352151897;2.23534884142;1.84424223916364;1.83912658429251;1.83507181316191;1.85430671199484;1.84848266614025;1.8383725391533;1.84629019396165;1.85796302462388;1.85745714434735;1.83258710608736;1.82785976985536;1.83227925147353;2.16840916748772;5.37370791331633;2.21933796420824;1.83617889478313;1.85593023921657;1.85632107422962;1.86405735275763;1.84543916956442;1.84124294851869;1.84149588512698;1.84921338879107;1.83898384248558;1.85186893375914;1.83426691453443;1.84068786733913;2.12488839852153;6.64676156670347;2.08884781128504;1.82930952260154;1.86429610935801;1.83090242442243;1.8713330986558;1.83152348528201;1.84459357645564;1.85061783201726;1.84419505552047;1.84330277587138;1.86227885832067;1.84405812255631;1.83991749773403;2.11647281547843;6.75889728396028;2.16635770430614;1.82814057447932;1.92165401478832;1.86214447064609;1.87135988125458;1.84406950217784;1.84817150951537;1.84173824423733;1.86617204297122;1.85436045122951;1.84430080920377;1.83786206291982;1.84040639742154;1.99402539300994;5.67994991764946;2.28066942249804;1.84436734034812;1.83856575467319;1.87631736147538;1.8704890927323;1.84695389303463;1.86429402678565;1.85847724797049;1.84970895239083;1.84583996322366;1.84502975384271;1.86281220115479;1.82808179347229;2.06197471422791;6.62467213555974;2.37097482143847;1.8621999511364;1.84577501796725;1.84638368323236;1.86455661888145;1.84344249602818;1.85096798751312;1.86373137792573;1.84048851302378;1.85027732363952;1.86954783514141;1.83026399903744;1.82535836828908;2.10435431348757;7.27393104034087];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.6878133176702961;-0.73346059319496115;-0.49750228897127607;-0.48518011289599572;-0.19548392026543246;-0.061804583981250404;-0.58756467592099726;-0.84123297275574715;1.315793588356436;1.1477973661639016];
IW1_1 = [0.25872172739729155 -0.34772675754756588 -0.25055516039551134 -0.1045181606120287 0.52475951535737897 0.45505132545860644 0.36849227189515699 -0.0067568376608531499 0.20851260512103142 -0.22414840393177113 0.079026512888385025 -0.051156885355589647 0.13713504696594225 -0.20004884379589521 0.2100406818115324 -0.047201468637138033 -0.52834188145422656 -0.40350688247327754 0.47776579156635124 0.26707140038457255 0.10132166913715664 0.027751090515766411 0.146329219616704 0.61174170769536962 0.51722209565115773 0.15720417221628954 0.32749946346096853 0.68952423442982935 0.50072142329532965 0.0051484648832170674 0.025312996264975268 -0.20136600325725329 0.15737581172149057 0.28318922857228285 0.5265120454912362 0.30863446408960971 -0.58345357595644465 0.087812336535961127 0.87431336706449447 0.73831938481573878 0.38903793057464464 0.50658843092460337 0.43188325586556225 0.22799328934236274 0.067312047390504212 -0.097688987837023164 -0.098832797936358727 -0.20237022515224873 0.25843555523846096 0.18921007065956019 -0.12872735896601284 -0.11645302936505622 0.0022781865813403341 0.64834716696093453 0.53615678176622394 0.29507790692726643 0.59090098799378532 0.11611570741298688 0.037832022768631485 -0.41610209486201977 0.12106678317161865 -0.570290651524895 -0.46773363976601046 -0.334375231349758 -0.28620853031373772 0.1758492379721481 -0.22913074433009153 -0.37365046312189737 -0.076423619364433218 0.026202855525422061 -0.26701986748201267 -0.080964535536089316 -0.27611019932294983 -0.17369033177376653 -0.19579475486922482 0.01943444490983914 0.059711946934720567 -0.15920249326234728 0.16216938074450252 -0.28437940715773158 -0.11437978517537936 0.1448932209379338 0.22125345067978319 -0.067622849381077099 0.012190164644502203 -0.02375318875720011 0.15677136485743315 -0.15002062160222149 0.12991931594143152 0.24340075417970869 0.10755328991671906 -0.35319583762133733 -0.19855045320552814 0.23813650663020436 -0.49902396779288144 -0.36668236209534916 -0.18554176552655782 -0.15998499878132777 -0.30037040285489225 -0.26958957580741738 0.26654194335186859 0.30375585116856291 0.14006733640153651 -0.36640532225946221 -0.16375439494607205 -0.15076427393658159 0.094658546601907187 -0.22421499048314697 0.084699760591119111 -0.028136412311538551 -0.22591573563040498 -0.41027542781751802 -0.52297780545231487 -0.51869346393954407 -0.86963410226924975 -0.272259051576556 0.29782689594320805 0.13474941133200188 0.091953547491733373 -0.15847519466565424 -0.036131103692133591 -0.24932039710638423 -0.41888980665412279 0.11454796443666979 0.50282732063917412 0.32204717942772565 0.14688808487162563 -0.14965660477236356 -0.31254460131636908 -0.13517323811343818 -0.25462659120561443 -0.17837078034750811 0.21310604084234275 0.17570896008464615 -0.037226065659452433;-0.074350850715455191 -0.23287053948805908 -0.3889176919249876 -0.034617424896559459 -0.11877818087982514 0.021497030295234271 0.15907228600816078 0.41889173246671507 0.075120733263066564 -0.008371229277819258 -0.077971064711946036 0.0093858528383846257 -0.18257847310409012 -0.54193220042908508 0.5567808920529046 -0.36800908644404118 0.22080496895070667 -0.299958385819941 -0.26593887307199054 0.025464419433324476 -0.040737148829845686 -0.32539367444572609 0.2039909193109323 -0.19868725764621492 0.22793824091239676 0.45973411284684612 -0.26007298808854551 -0.086514706399762553 -0.3638918063914548 -0.11577350599606298 0.56127943602446539 0.61248683030216489 0.3021307495053176 -0.34579421392779286 -0.1207281645898531 -0.69381859151835512 -0.080488843583402053 0.0062859074254583425 -0.030216122441129159 -0.078783066683096481 0.30472302210524488 0.011826653482376551 0.26131027275571139 0.34215331193601278 0.50072805198563597 0.16104679055728136 0.087308588727830358 0.29054079772602565 -0.24523990989348307 -0.45951195899346498 -0.56867367761344845 0.22366186021069123 0.16447095199098968 0.30269915957440074 -0.057741841079641761 0.63749753819925437 -0.63571364365000016 -0.14478388235215914 0.55567222054114196 0.56364861246947728 0.288159180070863 -0.07015277259767011 -0.14307654899513914 0.21782443481807756 -0.41236189285086267 -0.29241310333705933 0.069079447935510588 -0.037057701097564781 0.38317734272625492 0.37712277609118022 -0.12630251131817441 -0.057301773152242053 -0.075850111115266572 0.24185747372583388 -0.11056319066912633 0.40796762040727175 -0.21811560240735539 0.4219041266151814 0.085199512747749145 -0.25909692554415431 -0.51242832800369231 -0.030324330634342908 0.15718684232929414 0.77492511968792444 0.050579265447959404 -0.0068199205066909177 0.19367035411236097 0.18514144152331419 -0.014615043855799493 0.016277493437325249 -0.45353384622318482 -0.21066188012393403 0.93389091137932878 -0.13789460758352731 0.120623061647591 -0.10683435777045741 -0.2722314622005772 -0.27598398634293664 -0.21163619721930332 -0.14182414303050717 -0.098839596564611165 -0.0221831288785562 -0.34036854565128305 -0.44864862515298803 -0.03202562988560341 0.14940176716467507 -0.13432959945053713 -0.35170002206271644 0.01727598946034507 0.56524003168633652 0.41289468597036755 -0.45444490243498459 -0.15308644557265622 -0.28471283692400479 0.29544688600124519 0.035905390243208532 -0.039667955748336189 -0.24204287791713081 -0.30960462467906896 -0.31520198963725954 -0.11745047447833237 0.14144253729511069 0.34171881510771374 -0.15307932156937196 0.41906770904772517 0.48855646117968049 -0.27648573308260915 0.39475967467069145 -0.044024840234468232 0.64331026779367595 0.2577836973564499 -0.40111093744676651 -0.43372475763643409 -0.001729507428231622 -0.23623001374912583;0.098506132914068262 -0.30989496815491241 -0.28467302562080515 -0.26340460168025331 0.074184674247583113 0.24352662865277672 0.40079009420121542 0.11507128681331293 0.20559916226860567 0.043749780439484999 0.11359851625171091 0.26252171870705066 0.24539485309100473 -0.016979225586276077 -0.11187318292719714 -0.14874301818488073 0.17254199532824596 0.11294508171496428 -0.14618457586891193 -0.0067525032069689003 -0.081852724721445891 0.022799378306329172 -0.03730608755986068 0.081694512549726928 0.12080047683916338 -0.094460313581868835 -0.10981027735992699 0.35423429289692066 -0.14671095894594496 0.3293717399547354 -0.039232910609370328 0.015119035050179809 0.15021069724124128 0.1458231792389976 0.13230318301372199 0.0019190675587066586 0.010517777055602306 -0.21751998501427991 -0.029614063359626748 0.047572701880359378 0.28356273417056815 -0.0011112233387013961 0.26177171578575781 0.14059977215762157 -0.060199108533767372 0.22215964776366498 -0.11338556043882533 -0.11580518050833856 -0.055259120209699447 -0.0063359423912511363 0.15307734289306071 -0.039688477210488807 -0.0034948671720376537 -0.33257188006183958 -0.089357716661492836 -0.0011312212709041188 0.0044292139869770925 0.24379052803242413 0.16883842705237365 -0.19587417068609386 0.05128195893156242 0.17242063780097408 0.23320980711910971 -0.075666652417451477 0.26436382459050278 0.079271440535550658 0.15215086217684037 0.29560157008945509 0.1680376000285515 -0.05948388621672903 -0.14061400402287286 -0.32466635991178316 -0.16306274372130466 0.069677490713937265 0.042692647895974788 -0.052426076685093054 -0.03335274001712922 -0.029831249925931544 -0.12495521968523286 0.067809758694603275 0.25236309847147281 0.13979785944319414 0.2482140526571143 -0.33645542798890699 0.23796218113447834 0.15025116951314865 -0.14518697261812741 -0.12117611333429176 -0.10026654699249037 -0.12853504196857743 -0.1479958285091387 0.059461841102724913 -0.12583718131828364 -0.30743530609837671 -0.029679663224032454 0.10815616065107372 -0.093560984443032819 0.13278901331124976 -0.34814275748245516 0.24773331252684042 0.023998253021609472 0.070620237304172731 -0.0091297604076193521 0.043082181590327291 0.16923212275115565 0.063125368430043988 0.088246742441570145 -0.49109414349346692 -0.24864031492552804 -0.11187922683138919 -0.13914357912097153 0.36488762456145285 0.14500745063344417 0.012100882301889035 -0.058346087867337533 0.14157180975541389 -0.1254858117812355 0.10853278693674764 0.085244878695725654 -0.12203108360075801 0.31583355362982879 0.41429993611001847 -0.21439722095284833 -0.25434957135546238 -0.53529647993793594 -0.35825166715160445 -0.2298275402952128 -0.29941630278884079 0.082774847917814517 0.48195158799744697 0.53450680471302314 0.28325793051672671 -0.12147416576736944 -0.11054882905922192 -0.073499729807872713;-0.070853026564914184 -0.086408150885382395 0.079099347690252161 0.060163497097225627 -0.21199934391814679 -0.08019577022242419 0.314734590169162 -0.048098882960310285 -0.01558442440005362 0.018656667455304483 -0.13418639621932724 -0.016079705044111388 -0.12478834408724136 -0.037394220240052921 0.076244868113389597 0.28021212664760153 -0.049623101421783722 -0.59115923221072042 -0.37768531350659712 -0.18519161703307885 -0.29289481052287553 -0.078256059686208371 0.19678260741752898 0.37050011368014563 0.11212200198809355 0.29388680394255434 0.27608693835783221 0.080080283536245078 -0.093796079476731867 0.22319178142891588 0.092001399583344773 -0.26906109476476331 0.010482671274719295 0.20017854571641577 -0.12896096045565869 0.51195158427113641 0.25575234462579471 -0.24515262698147741 0.58781412339768824 0.10627260053193248 -0.10876101481971177 -0.10522058516425777 -0.15931334930951824 -0.12734738340369939 -0.077921896820292894 -0.30095806051053525 -0.041043532325779807 -0.18601788501787728 0.090563771251178524 -0.5220833664145017 0.17418584505964252 -0.34904831209439946 -0.27967365412764811 0.33614765798355001 0.62459738735661985 -0.094599326204681811 -0.21428684577020149 0.21997397548346487 -0.24185376755402752 -0.42301183057802949 -0.34193668168515584 -0.27344280989378017 -0.34438141790972593 -0.047687596687271197 0.15424955534458887 0.13507096403280672 0.27737330194772686 0.182579533771002 0.44069057191698852 0.14322029696431865 -0.23655406833273152 -0.34477295416880044 -0.10452924118527987 0.18420450779372391 0.13498174175574604 -0.32313157458769115 -0.1072381787907792 -0.052934140779075746 -0.22413032641669195 -0.1388362474375141 0.54767499263132779 0.34877240464044873 -0.17670861209470567 -0.11292710837377851 -0.09162718216636169 0.12383146579077181 -0.23284095337934674 -0.10581973357029197 -0.3397384226669653 0.1640287652707369 0.16674680297738823 -0.20306244877714347 0.61756952203170623 0.045695972891718117 -0.18082429289289023 0.24948292930817623 1.2192055391825682 0.24451553408106622 0.10711325231638376 -0.34847336215928537 -0.1821424805215798 -0.66241887009093559 -0.55090998934387048 -0.21643149637019773 0.17499688017551784 0.22995505895943796 0.071645248820812579 0.49967992276466827 -0.077443938689845893 -0.24805342948910974 0.29472705208067995 0.35779783725827857 -0.40050974459173094 -0.21556859851737589 -0.019855476229310397 -0.015422349032795912 -0.1712967429675363 -0.27747678954331101 0.41181591909041593 0.19835142339584264 0.59671211959958648 0.12650090956107907 -0.29728055587767094 0.034449930565857032 -0.22983047347650562 -0.082209663594631971 -0.01233675186252544 -0.2013588816162187 -0.12668076024597077 0.43822415091617445 0.2383131314486176 0.29899100609912416 0.3464796263251092 -0.019562424204196523 0.23787861095112084;0.000544924012886072 0.1776470173613417 -0.035920281711370732 0.24056316450205997 0.18823305708465873 -0.010844801087014433 0.16405337096107642 0.30178265034494467 0.595616158963724 -0.054959370195251211 -0.31141662510814649 -0.035986762105116907 -0.66615679566700625 -0.0089482684755659101 -0.10273713709128145 -0.16422707043764059 -0.030502548202852454 0.42661615849897649 0.26265899280693367 0.23484483198344822 0.71356298927613238 0.10601684806429362 -0.068180069686842398 -0.13183058893541058 -0.0085554983472253404 -0.29240603445032876 -0.39738426676518118 -0.18732091575581541 -0.050035306021128274 -0.031384320432634033 0.0061450622133540625 0.16153100501508094 0.087875520483354216 -0.38067856316762683 0.39981238337726405 0.087634442449704308 0.12733240973137816 -0.39226805409767668 -0.15601136747009001 -0.060852865762064126 -0.1425421349672219 -0.60238624619001424 -0.37067300856740715 -0.30915628738870027 -0.066551238336772373 0.042205088631610453 0.17808771342975346 0.11500859315804801 -0.082021008144987778 0.0017897798177545299 0.28795775094046311 0.10042158466384067 -0.13948246247483906 -0.34921734588827974 0.42696791465565814 -0.2668347053564884 -0.15247169656147619 -0.33909699700802226 -0.26060456584714592 -0.023629640605794238 -0.11790759553143672 0.25443221606894778 0.40498497720954857 0.5044576113556869 0.32970358002626043 0.11912241990163056 -0.36705512331113566 0.1860774779085802 -0.40119014117466961 0.00035370821559425848 0.064657767859105611 -0.53573823746980664 -0.3112412608115363 -0.14095714072118337 -0.59102768243996917 0.10132896612753006 0.15849612679410338 0.24009066138933488 0.74010270150727331 -0.21592270939134905 0.24509418753445328 -0.14592150767252621 0.43284458904885997 -0.33756206365641134 -0.48993220660332126 0.13338803016792719 0.5464817532091415 0.18343605735031648 -0.025102136155603121 -0.0061679202810271498 -0.18282043159879249 0.28383890717740923 -0.21058645449452751 0.10047161720246653 0.19416511008658169 0.34794464032253619 -0.54582628327086358 0.22158828964633834 0.12214629412653936 -0.26968942455594019 -0.1022435410573776 0.14054585379972914 0.052098172637522949 0.16413136126122641 -0.0033259430505271081 -0.069063333525268583 -0.20287878246575344 -0.81059019513349972 -0.095601333053617732 -0.015800934371349773 0.37894760681995682 -0.13127017103879796 0.42168054149432149 -0.18877774708995623 0.22303721373511973 0.43609569167267193 0.18284299002235369 0.0081485264739733776 0.075815023156300412 0.20252882738270159 0.068443263785126399 -0.17901362606854263 -0.6525652000372526 -0.21656906467633216 -0.36059278529313443 -0.08586045098246467 -0.15477636237207448 -0.055492616807555635 -0.11663798907214258 0.78075218916741118 0.044055880777383927 0.26744574728509157 0.043899925612369203 -0.50052043673002633 0.53812459619668129;0.38890664598242425 0.55608980788457274 -0.25949527572631259 -0.3518077582163745 0.041795358975415343 0.163266928350083 -0.12743262115527898 -0.17937609095216608 -0.028217772456985184 -0.072636809605501534 -0.047512557027236287 -0.098075538309547267 0.10597159150504211 0.029951488645127516 0.24504563229182397 -0.17380232004498691 -0.24590946889919371 -0.87329193731797328 -0.33294568082248455 0.56676731558008053 0.38280640331241916 -0.054302275290405433 -0.88598257803280756 -0.32068009176096091 0.11372089856244597 0.13465538428401019 -0.38585222837405797 -0.53481884336482355 -0.32874845917459145 -0.075059777812033213 0.17418249808461683 -0.31723268824261686 -0.37753510444899396 -0.27458711715541245 -0.094913509811235822 0.58072481915699581 -0.47259340613895234 -0.26934507733977681 -0.28559915927392193 0.11611345456447855 -0.020780327701014147 -0.22312749413329239 0.11724813007089059 -0.14652736510840844 0.0027091984010645239 0.60739730777820156 -0.045026620598024127 0.028021378003725755 0.40499784048839166 0.43204693344820477 0.39648505910720611 -0.73367872774444476 0.090610615713954082 -0.079586743895126849 -0.33598525371626142 -0.21942901669731085 -0.016543825320339035 0.03908029888889409 0.24190579282954508 0.19707479344502812 0.17640885047374971 -0.037701100918792058 0.1512479681813215 0.1918977465940219 0.29723681858226059 0.73249482927602816 0.73411461077882501 0.53237752063990018 -0.1647380151337472 0.20063516496453457 -0.20104159687320383 -0.14720411948419712 -0.056060493796873605 0.011000506449712724 -0.44258515145357985 0.21486297344361382 0.06624652767515761 -0.0040150158249741569 -0.20451250487393668 0.083676994123488363 -0.077106800102716283 0.89239926229524003 0.58363051381375408 0.85349775106679104 0.031879274067656317 -0.20145680195500404 0.24336245939654899 0.010575162152143623 -0.22322218954840631 0.094916996135915893 0.022410580832732081 0.074547413941726176 0.30909334218014028 -0.19278531719237066 -0.1656657945367507 0.017056880571725306 0.0071413308468113151 0.39510779712356064 0.49042157454577973 0.096076554002900258 -0.35393363883465445 0.082266875147784302 -0.17310289041309851 0.19333023099937593 -0.30811311856665979 -0.15278468508734475 -0.35940777186751754 -0.55619421347441544 -0.66010750745240609 0.063685021961287877 0.39230856168878364 0.17607653158750255 0.18068493441409467 -0.026895406674816439 0.66876062324756558 -0.15654249747127286 -0.33367240830057399 0.091501029721734337 0.0071524665185850383 -0.1355012815997825 0.25504703605665585 0.56757801685761122 -0.38243049531360102 -0.1817996801255129 -0.54039939503373857 0.34408817726791868 -0.26569628230827691 -0.2365405178229919 -0.1028325981286573 0.014508386909976559 -0.077988167152472171 0.094562176019607758 0.028535650834842784 0.1695492576544263 -0.26695617658318532;0.32709318801452769 -0.024649482327126854 -0.057480504413528886 -0.26927305720113515 0.010768876372498007 0.057241760474785137 0.32549918665461008 0.27766127500042032 -0.021965908710316947 0.39723538663916924 -0.073223370494606449 -0.29444468069718427 0.1356753059134912 -0.031567467610321802 0.19500081829993768 -0.12131338197998488 0.1017731208519773 0.037831317762523672 -0.024636434246462224 -0.16603565182161081 0.29826953452623306 0.36056483076328288 0.60516250434800289 0.30337464109458567 -0.035237622279842812 0.017699979809884102 -0.16614591755701016 -0.3796632591559167 0.27705762625165165 0.46446226143732305 0.31160326154433471 -0.041623011912702526 0.068699761214827695 0.21673357972683704 -0.077637206482227994 0.61722234462513226 0.56835598757485406 0.30681669343457868 -0.17187249573463287 -0.025810101737370653 -0.0081752789668961181 -0.28175575945161552 -0.16418240803366602 0.010543686156063378 0.050499503959890814 -0.15097279609751599 -0.23522925311377174 0.40031772366076945 -0.04587813210058185 -0.042238659010598499 0.67606304377446835 0.36687469028573833 0.63482308690889422 -0.094785589236999493 -0.081359564511382626 -0.316196316357231 -0.23267040470626937 -0.26198303038991094 0.24475958102157053 -0.36272235453457369 -0.19277064054290494 0.047568993794232489 -0.33398469468102587 0.049358832037630682 -0.034063706076871286 0.36207321631196326 0.11302777443615428 0.022502296692142501 0.27567504792824393 0.092197174126479181 -0.22839106035426798 0.38678110551043327 0.050636150115254033 0.095962214959779538 0.20867208447700941 -0.67204983523403394 -0.59905798780707897 0.018803940796158332 -0.42937862990073578 0.23590668493033196 0.14700980365333577 -0.31593062803835159 -0.47486460057079571 0.11517466652080574 0.34191046477838299 0.5377912593896147 -0.31826041201360417 -0.30390164776115697 -0.12799341356220684 0.037435458270351447 -0.67418850259892826 -0.56807281017339861 -0.12975728773970396 -0.19623227559902531 0.90048828177802398 -0.077614089750877718 -0.04510059950489935 -0.17157422695870442 -0.44171866905312712 0.48675090607829513 -0.16334538425246795 -0.35323230595930638 -0.60878510622421067 -0.22344849673861486 0.26426315103646786 -0.023617442085123133 -0.44138018384627858 -0.12092014562372501 0.24715091009736104 -0.53907132188829243 0.045048849236440237 0.39761307101847959 -0.70935719927444107 -0.2616746825714143 -0.022209271310857294 0.032654935873620339 -0.61710807083715535 -0.17595305939344918 -0.18940782295043598 0.093151273480688038 0.12588047233053229 0.25271588144473617 -0.26349736060648343 -0.12482913605122029 0.32421932864938902 0.30527187556500179 0.058509915633093851 0.1268108085994982 -0.2307735352764983 0.21026834632298885 0.063480309130981002 -0.31031793222191484 -0.35895978261008454 -0.11828943319289829 0.2610795568332458;-0.18978667577332961 0.37857571160919695 0.40165793694597746 -0.22457668450937093 -0.32295429829432221 0.13419012563367644 0.4314476136037721 0.20351535373186075 -0.44908228464184491 0.074960423315620139 0.22282364223684745 -0.19314508658770888 -0.23973479586539534 0.0057709441461612759 -0.1794635459218957 -0.081088096595946915 0.69034287794825577 0.0077135854999778987 0.016860863355440344 -0.040376151993183784 0.15946724685972993 -0.21230074022229481 0.05540834948473751 0.15122549141536473 0.13349971939807928 0.23124923850654036 0.037150415134632249 -0.023572376233559747 -0.56308216473680317 -0.24623219863754933 0.2108908061902858 0.17921547012761002 0.10722598394391027 0.45495515035933759 -0.029860940455310264 -0.18190064731136252 -0.10519471993067664 -0.22900129454173035 -0.06801381292680482 -0.55492977146952016 -0.048653159574092331 -0.0577114332169563 -0.099563292234766343 -0.0022750986952652548 0.15151798435159927 0.076990634990168269 0.080409342752894131 0.069216778418865657 0.24422190018909201 -0.53657632945943523 -0.47987548038200528 -0.15385450998711989 -0.50872626459014703 -0.24310318201323006 -0.27572196884345351 -0.057663057198543484 0.13902706864612682 0.32243277488753769 0.087061355658262687 -0.11560455267436152 0.12540808515735738 0.66671717252162777 0.77654078865582221 0.29135104625248415 0.035957224884926746 -0.37335156048655987 -0.40886524327443713 -0.58675644771704039 -0.50373761652960547 -0.49930323950519961 0.072116758866880876 0.18607552726948887 0.55635470799853015 0.65513064738592097 0.084264052373467666 0.4594050485740323 0.7403131424614483 0.03961109624954897 0.28217553838878751 0.27520993987830661 0.47333062299836953 -0.039641520051562441 -0.44593182834289374 -0.74084732050185009 -0.19852565709382977 0.33623566259622795 0.2096539874479017 0.587586635376948 0.49498301209521794 0.28236601059196981 0.24595727256393093 0.080678268020316871 0.30829714591286883 0.25592186623964813 -0.11763010201544219 -0.2147096160517295 -0.011769620238270374 0.024976139668536082 -0.54440922423716609 -0.71176373065083698 -0.20326099052021349 -0.3423490900148643 -0.073949366960751273 0.41313024438415252 0.031793849738480692 0.12528714937773111 0.20219043791502667 0.32820501643490563 -0.086406454499806995 -0.18062330920237615 -0.31291138477068775 -0.65849828922659459 -0.60033872970683011 -0.080251237493827565 0.076498585531522292 -0.39170388850250604 -0.34584723492553032 -0.036574395814710427 0.27502597686201541 -0.15265683083075607 0.23501408136222623 0.30862061617742448 -0.30784487952884376 -0.0024827380302765373 -0.078714648483797556 -0.049623553686431641 -0.15325701131877548 0.11262686977008493 0.14175148194824308 0.3474687497393516 -0.016361088180278472 0.59441864943654887 -0.1329887180243019 0.098003993419780278 0.014072255361397303;0.017180513917590078 0.0020063410376616039 -0.32971645575373926 0.28824069783676276 0.061618051687081343 0.3523129680609956 0.056059973115680548 0.3194027236521389 -0.10713748543698327 0.0093455903590567418 -0.28181206764463856 0.12048090616438699 0.44165486655997033 -0.07022845343282022 -0.12260169138069946 -0.035886138844233452 -0.36947481954803874 0.35972491023789338 -0.029190786426820325 -0.078376013934599156 0.068625442079102095 0.41094756723795944 -0.094526209446766207 -0.0093426385372282345 -0.12872409287807229 0.1370908894110052 -0.27920738348679047 -0.36571173622895159 0.20809026446514173 0.32018228464603915 0.097609990597741642 -0.10109672848593373 -0.17400989955209312 0.19277561564086182 0.19740065850966745 -0.39807736872617616 -0.26117745408550336 -0.59321649563793288 -0.5778769450667991 -0.22294149571878899 -0.26520656953442734 -0.021575712471180737 -0.15768189586834197 0.028630861763852378 0.35805001727766966 -0.041002086546154684 0.0310693199085815 -0.30359447265253486 0.1451972578212492 -0.060756873720859583 -0.30553583707108728 -0.076357101983487163 -0.56882121267172281 -0.36709794756917741 -0.12211780297952303 -0.24927505925171967 -0.3914884110985512 -0.17810529634782216 -0.08819491191471425 0.031652029637654205 0.26167701782535963 0.33676182009787231 -0.087509201119609276 0.11939989444501387 0.2349370041583215 -0.0046318660073191489 0.48942158567522437 0.36696094863382345 0.31615528913379604 -0.1287960667776035 -0.30409990995352626 0.10667046387721907 0.0982023891748601 -0.19705600743448123 0.27262430000950139 0.20211704886731258 -0.099617321962407579 0.0086848063891036241 0.12749311658221693 -0.035118592517522459 -0.49019295444834704 0.24924110614213726 0.4301278248704633 0.34314259753735088 0.16812573681982554 0.12719874213477861 0.23644382622921667 -0.088571583957201425 -0.1598728937246742 0.25407088088065111 0.080490585079151092 -0.14750750066079032 -0.26354972859084463 0.30928343288606686 0.24478683722365538 -0.063860568927152903 0.11359301450952815 0.082931923981910752 -0.27742800857657368 0.28749759681192932 0.46702226020625448 0.29746257582036906 0.024094699234112168 0.16662335536016926 0.38703899894494914 -0.40174005015891828 0.12042435122511788 -0.096672377476502744 0.12137347134077098 0.26458641050488663 -0.10550485395459624 -0.087945219299314231 0.25418087974020576 -0.024503113090374087 -0.27402979894391494 -0.11954087271355815 -0.18080456088960847 -0.34681385594272707 0.23005333357988048 -0.068928781293199778 0.16244713635699132 -0.18863618338268048 0.071661528038962474 -0.12730481067301627 0.48147513365820982 0.35773759488684026 -0.30314334549707977 -0.17098433141071598 -0.066199591674933292 -0.25774124016747862 -0.40296600852561804 -0.54417011901358303 -0.1840941059221802 0.036256063471899427 -0.44989528625674746;0.062621810103613895 -0.3032977770449643 -0.16508058506041184 -0.05774093395103732 0.14793268424780581 0.16677149055100635 -0.073995153616673442 0.2652224019475759 0.16285385762924331 -0.036561289985965466 -0.073446838017303742 -0.095536284032773464 -0.10542200199521432 0.068927884266724596 -0.081763111371036118 0.15869513455334905 -0.2034305117518497 -0.045948773823127925 -0.24218761878512424 -0.2428496172900019 0.017714309786938272 -0.24164523182125819 -0.56727161422831995 -0.1484077301386636 0.026992926324020675 0.021816216999500766 -0.14149400280864358 -0.16997482007626397 -0.14843637310974728 0.14664751754887267 -0.16253498815445874 0.19590027719300651 -0.15881382923449211 -0.027348846866246172 -0.36226317807885183 -0.26529502478192163 -0.18614917804389841 -0.37173945542254816 -0.26790501406593226 -0.072601553015465919 -0.15458196131706425 0.05184219223951228 0.015298411781204826 -0.20855978051018795 0.14574658721451539 -0.14210552241502517 -0.086357715824767131 0.25599562825712524 0.20050878818901186 0.25356316434683768 0.16067192106045855 0.066075841680394057 0.24726726987725783 0.16574192890249959 0.048228711368843234 0.20213673048962991 0.27167148731358998 0.25618510808694372 -0.079456057547589928 0.0035441485884236488 -0.075197633163507166 -0.25202516297415134 0.020794529289801023 -0.19566798717747722 0.39836320913989764 -0.070299982949405482 0.17569577288741503 0.12144161878254692 0.016761462648233114 -0.033318061658390088 0.46430157220298485 0.26477373138809024 -0.070871348341985954 -0.23332462779844629 -0.013797237320146458 -0.11677899652426017 0.049669172706262386 -0.3158411696150954 0.037454001801090382 -0.26268429763843132 -0.51312689931201438 -0.39715038838243666 -0.32438543936924341 -0.10086829657224147 -0.24192992979290401 -0.24552123454634128 0.22094131852561269 -0.32347469109926336 -0.31785252148786197 0.16013094489676535 -0.16999005564033393 -0.099244968044280832 0.40324783688590959 0.19737725884785823 -0.13956842133922395 0.1858630535348505 0.44780775809294016 0.43530051233211564 0.28917914726584287 0.44307672560725536 0.32017563015741118 0.017984077099843392 -0.0056045501100723521 -0.10131820494092346 0.15899386450061359 -0.20207999022742246 -0.047835470088598571 -0.26312405932911137 -0.2807446517437861 -0.19093213152520297 -0.017182885102681227 -0.3174974003464418 0.058347413612291593 -0.012001025041727694 -0.052331116141431461 -0.42716208696901709 -0.31484025586864167 -0.16012603600688818 -0.0061219699060634982 0.00071904980738300445 -0.1637918081199907 -0.047432702314150123 0.37885583778844822 0.080461646293093783 -0.29803041768772293 0.27802695760192558 0.53189324544210359 0.29301144097523119 -0.030536764672952351 0.078519615861483164 -0.02867956548483689 -0.015746096485761907 0.23496105595132444 -0.18462618291666139 -0.10524494415536513];

% Layer 2
b2 = [-0.97896849037013434;-0.40101960572868151;0.41081046056193804;-0.40373535407804062;-0.42553472221011446;0.56961253323533911;1.0860998017263002;0.62558257328209743;-0.5275167769078567;0.058577506934489966];
LW2_1 = [-1.66454152106457 -0.35253402736939293 -0.78615830515421181 1.2720261844891751 -1.0650243404209558 1.8758080339562082 -0.4225792991155749 -1.5265093399682597 0.21645326791263042 1.2470640301069711;1.3053456455503836 0.54051135724932164 0.19596145319914782 0.41369117895247182 -0.95251251577766161 -1.0111506694795851 -0.010637442456895761 0.06022199010266361 -2.1019284770370326 1.2919052985448569;-1.2524222772514582 1.6029143777598205 0.93505335027763992 0.2921849127729893 1.4840421875768215 0.75437185799118167 1.5403470698537669 1.4323947844862031 -0.29201970082684936 -0.7388800325564775;1.2814992873239333 -0.6243568475827358 1.4228559447880726 -0.20568474493254058 -1.243009995448529 -0.99737204751448905 2.5162405922714042 -0.98720436525219923 1.4204272728216847 0.65063965165871751;0.23543140475434191 -0.92750447823783899 -0.71377406845960567 -1.7482752094029943 -0.74991487788193245 0.238312817011298 -1.2904408122585027 1.1712610258183498 0.21593306377958771 0.10803669570310134;-0.38075684653746195 0.82044893264295471 -0.71667938319252789 -0.5736844190056859 0.9683959518516162 -1.6608917736875806 -0.37515014509894201 -1.2694230035852903 1.5956902403590019 -1.149917090801269;-0.84712815337734371 2.2753255929048799 0.20466038873510606 -2.4820365695763362 0.011643822449350451 1.3093669819757867 -0.039985627683418137 -0.46836871831695737 0.19859292634196041 1.3237786432321714;0.71295920265467272 -1.2785216393467127 -1.0794977312178426 -0.33376911668613851 0.024904159463485377 0.37106952146706862 0.086823598920895584 -2.6143112602627654 -0.32186497013382492 -0.012368627662043757;-2.4409342325616694 -0.88744271577336564 0.49957849082919853 -0.69819291253758053 -1.26739785449523 -1.573850010980288 0.47002458947388293 -0.031239100098563326 0.24326647598518503 -0.14868859975778476;-0.079256472605026149 -1.000147032243955 -0.26052217757794693 0.95549191818399148 0.23425653267130989 0.054849023233636052 -0.31814947323125298 1.7054817314943307 -1.2166050965053945 -0.61783573015443294];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
